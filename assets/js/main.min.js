function launcher(){get("#titleScreen").style.display="flex",get("#titleTip").innerHTML=CONTENT.tips[rand(0,CONTENT.tips.length)],null!=_game.core.name&&""!=_game.core.name?get("#titleCharacter").value=_game.core.name:(get("#titleCharacter").value="",get("#titleCharacter").placeholder=CONTENT.main.titleCharacterPlaceholder,get("#titleCharacter").focus()),get("#play").addEventListener("click",()=>{get("#titleCharacter").checkValidity()?startGame("new"):get("#titleCharacter").style.borderColor=getVariableCSS("error-color")})}function startGame(e){get("#titleScreen").style.display="none",get("#board").style.display="flex",changeDisplay("normal-game"),addSound(),createActionMenu(),createActionButton(),_refreshDisplay=setInterval(displayGame,100),"new"==e?(_game.core.name=get("#titleCharacter").value,_game.events.lastAction=null,_game.events.newAction=null,_game.core.ongoing=!0,playSound("Room"),get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.start+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.startGame_part1+".</p>",get("#game").innerHTML+="<em>"+CONTENT.events.startGame_part2+".</em>",get("#game").innerHTML+="<p>"+CONTENT.events.startGame_part3+".</p>"):"load"==e&&("fight"==_game.events.lastAction&&"fightOver"!=_game.events.subAction&&changeDisplay("normal-to-fight"),"chest"==_game.events.lastAction&&"chestOver"!=_game.events.subAction&&changeDisplay("normal-to-chest"),"merchant"==_game.events.lastAction&&"merchantOver"!=_game.events.subAction&&changeDisplay("normal-to-merchant"),get("#game").innerHTML=_game.events.currentEvent)}function playTurn(){if(_game.events.subAction=null,_game.character.room++,changeDisplay("game-to-info"),_game.character.room>10?(_refreshInterval=2e3,_game.character.room=1,_game.character.floor++,playSound("Floor"),get("#information").innerHTML='<p class="important">'+CONTENT.vocabulary.floor+" "+_game.character.floor+"</p>"):(_refreshInterval=1e3,_game.stats.totalRoom++,playSound("Room"),get("#information").innerHTML='<p class="important">'+CONTENT.vocabulary.floor+" "+parseInt(_game.character.floor)+"</p>",get("#information").innerHTML+="<p>"+CONTENT.vocabulary.room+" "+_game.character.room+"</p>"),setTimeout(function(){changeDisplay("info-to-game")},_refreshInterval),_game.character.floor>5&&5==_game.character.room){2==rand(1,2)?merchant():choiceAction()}else choiceAction()}function choiceAction(){const e=rand(1,4);4==e?(_game.events.newAction="spirit",_game.events.newAction!=_game.events.lastAction?spirit():choiceAction()):3==e?(_game.events.newAction="fight",_game.events.newAction!=_game.events.lastAction?fight():choiceAction()):2==e?(_game.events.newAction="chest",_game.events.newAction!=_game.events.lastAction?chest():choiceAction()):(_game.events.newAction="noEvent",_game.events.newAction!=_game.events.lastAction?noEvent():choiceAction())}function usePotion(){_game.character.itemPotion>0&&_game.character.health<_game.character.healthMax&&(_game.character.itemPotion--,_game.character.health=_game.character.healthMax,_game.stats.potionUsed++,playSound("Potion"),get("#game").innerHTML+='<hr><p class="goodInformation">'+CONTENT.events.healing+"</p>")}function noEvent(){_game.events.lastAction="noEvent",get("#game").innerHTML='<div id="containerImage"></div>',get("#containerImage").style.background="url('assets/image/"+SETTINGS.images.noEvent+"') no-repeat center",get("#containerImage").style.backgroundSize="cover",get("#game").innerHTML+="<p>"+CONTENT.events.noEvent+".</p>"}function spirit(){_game.events.lastAction="spirit",_game.stats.spiritMeet++;const e=rand(1,4);if(4==e)_game.character.stamina=_game.character.stamina+SETTINGS.data.spiritStamina,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.earthSpirit+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.spiritEarth_part1+".</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.spiritEarth_part2+" <strong>"+SETTINGS.data.spiritStamina+"</strong> "+plural(SETTINGS.data.spiritStamina,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+".</p>";else if(3==e){const e=rand(parseInt(_game.character.xpTo/10),parseInt(_game.character.xpTo/5));_game.character.xp=_game.character.xp+e,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.lightSpirit+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.spiritLight_part1+".</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.spiritLight_part2+"<strong>"+e+"</strong> "+plural(e,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+CONTENT.events.spiritLight_part3+".</p>"}else 2==e?(_game.character.power=_game.character.power+SETTINGS.data.spiritPower,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.fireSpirit+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.spiritFire_part1+".</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.spiritFire_part2+" <strong>"+SETTINGS.data.spiritPower+"</strong> "+plural(SETTINGS.data.spiritPower,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+".</p>"):(_game.character.healthMax=_game.character.healthMax+SETTINGS.data.spiritHealth,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.waterSpirit+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.spiritWater_part1+".</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.spiritWater_part2+" <strong>"+SETTINGS.data.spiritHealth+"</strong> "+plural(SETTINGS.data.spiritHealth,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+".</p>")}function merchant(){_game.events.lastAction="merchant",get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.merchant+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.merchant+".</p>",_game.character.itemMineral>1?(changeDisplay("normal-to-merchant"),get("#game").innerHTML+="<p>"+CONTENT.events.merchant_proposition+" ... </p>"):(_game.events.subAction="merchantOver",get("#game").innerHTML+="<p>"+CONTENT.events.merchant_noMineral+" ...</p>")}function acceptMerchant(){_game.events.subAction="merchantOver",_game.stats.merchantAccepted++,playSound("Merchant"),changeDisplay("merchant-to-normal");const e=rand(1,3);3==e?(_game.character.power=_game.character.power+3,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.merchant+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.merchant_accepted+" !</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.merchant_offer1+".</p>"):2==e?(_game.character.healthMax=_game.character.healthMax+10,_game.character.stamina=_game.character.stamina+2,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.merchant+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.merchant_accepted+" !</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.merchant_offer2+".</p>"):(get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.merchant+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.merchant_accepted+" !</p>",get("#game").innerHTML+='<p class="badInformation">'+CONTENT.events.merchant_offer3+" ...</p>"),_game.character.itemMineral=_game.character.itemMineral-2}function refuseMerchant(){_game.events.subAction="merchantOver",_game.stats.merchantRefused++,changeDisplay("merchant-to-normal"),get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.merchant+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.merchant+" ... </p>",get("#game").innerHTML+="<p>"+CONTENT.events.merchant_refused+" !</p>"}function chest(){_game.events.lastAction="chest",changeDisplay("normal-to-chest"),get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chest+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chest+" !</p>"}function openChest(){_game.events.subAction="chestOver",_game.stats.chestOpen++,playSound("Chest"),changeDisplay("chest-to-normal");const e=rand(1,15);let a=!1;if(e>10)SETTINGS.data.itemLimit>_game.character.itemPotion?_game.character.itemPotion++:a=!0,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chestOpen+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chestPotion+".</p>",a&&(get("#game").innerHTML+="<p>"+CONTENT.events.chestLimit+".</p>");else if(e>5)SETTINGS.data.itemLimit>_game.character.itemScroll?_game.character.itemScroll++:a=!0,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chestOpen+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chestScroll+".</p>",a&&(get("#game").innerHTML+="<p>"+CONTENT.events.chestLimit+".</p>");else if(e>1)SETTINGS.data.itemLimit>_game.character.itemMineral?_game.character.itemMineral++:a=!0,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chestOpen+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chestMineral+".</p>",a&&(get("#game").innerHTML+="<p>"+CONTENT.events.chestLimit+".</p>");else{_game.stats.chestTrap++;const e=rand(1,_game.character.health/5);_game.character.health=_game.character.health-e,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chestOpen+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chestTrap_part1+" !</p>",get("#game").innerHTML+='<p class="badInformation">'+CONTENT.events.chestTrap_part2+"<strong>"+e+"</strong> "+plural(e,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+CONTENT.events.chestTrap_part3+".</p>"}}function closeChest(){_game.events.subAction="chestOver",_game.stats.chestNotOpened++,changeDisplay("chest-to-normal"),get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+SETTINGS.images.chest+'" alt=""></div>',get("#game").innerHTML+="<p>"+CONTENT.events.chest+" !</p>",get("#game").innerHTML+="<p>"+CONTENT.events.chest_notOpened+".</p>"}function fight(){_game.events.lastAction="fight",_game.events.monster=bestiary(),changeDisplay("normal-to-fight"),get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+_game.events.monster[3]+'" alt="'+_game.events.monster[2]+'"></div>',get("#game").innerHTML+="<p><strong>"+_game.events.monster[2]+"</strong> "+CONTENT.events.fightStart+" !</p>",get("#game").innerHTML+="<p>"+CONTENT.vocabulary.health+" : <strong>"+_game.events.monster[0]+"</strong> / "+CONTENT.vocabulary.power+" : <strong>"+_game.events.monster[1]+"</strong></p>"}function bestiary(){const e=rand(2*_game.character.floor,5*_game.character.floor);let a=parseInt(rand(e/4,e/3));return(0==a||a<0)&&(a=1),e>900?[e,a,CONTENT.monsters.lich,SETTINGS.images.monster17]:e>700?[e,a,CONTENT.monsters.lightSword,SETTINGS.images.monster16]:e>500?[e,a,CONTENT.monsters.golem,SETTINGS.images.monster15]:e>400?[e,a,CONTENT.monsters.deadWarrior,SETTINGS.images.monster14]:e>350?[e,a,CONTENT.monsters.daemon,SETTINGS.images.monster13]:e>300?[e,a,CONTENT.monsters.minotaur,SETTINGS.images.monster12]:e>250?[e,a,CONTENT.monsters.cerberus,SETTINGS.images.monster11]:e>220?[e,a,CONTENT.monsters.troll,SETTINGS.images.monster10]:e>190?[e,a,CONTENT.monsters.eyeghost,SETTINGS.images.monster09]:e>160?[e,a,CONTENT.monsters.werewolf,SETTINGS.images.monster08]:e>130?[e,a,CONTENT.monsters.monster,SETTINGS.images.monster07]:e>100?[e,a,CONTENT.monsters.lizard,SETTINGS.images.monster06]:e>80?[e,a,CONTENT.monsters.gargoyle,SETTINGS.images.monster05]:e>60?[e,a,CONTENT.monsters.gobelin,SETTINGS.images.monster04]:e>40?[e,a,CONTENT.monsters.snake,SETTINGS.images.monster03]:e>20?[e,a,CONTENT.monsters.bat,SETTINGS.images.monster02]:[e,a,CONTENT.monsters.slim,SETTINGS.images.monster01]}function attack(){_game.events.subAction="fightOver",_game.stats.fightVictory++,playSound("Attack"),changeDisplay("fight-to-normal");const e=Math.ceil(_game.events.monster[0]/_game.character.power);let a=parseInt(e*_game.events.monster[1])-_game.character.stamina;(1==e||a<0)&&(a=0),_game.character.health=_game.character.health-a;const t=rand(parseInt(_game.character.xpTo/10),parseInt(_game.character.xpTo/8));_game.character.xp=_game.character.xp+t,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+_game.events.monster[3]+'" alt="'+_game.events.monster[2]+'"></div>',get("#game").innerHTML+="<p><strong>"+_game.events.monster[2]+"</strong> "+CONTENT.events.fightWin_part1+"<strong>"+e+"</strong> "+plural(e,CONTENT.vocabulary.hit_singular,CONTENT.vocabulary.hit_plural)+" !</p>",get("#game").innerHTML+='<p class="badInformation">'+CONTENT.events.fightWin_part2+"<strong>"+a+"</strong> "+plural(a,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+" "+CONTENT.events.fightWin_part3+".</p>",_game.character.health>0&&(get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.fightWin_part5+"<strong>"+t+"</strong> "+plural(t,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+CONTENT.events.fightWin_part4+".</p>")}function useScroll(){if(_game.character.itemScroll>0){_game.events.subAction="fightOver",_game.character.itemScroll--,_game.stats.fightVictory++,playSound("Scroll"),changeDisplay("fight-to-normal");const e=parseInt(_game.character.xpTo/10);_game.character.xp=_game.character.xp+e,get("#game").innerHTML='<div id="containerImage"><img src="assets/image/'+_game.events.monster[3]+'" alt="'+_game.events.monster[2]+'"></div>',get("#game").innerHTML+="<p>"+CONTENT.events.fightMagic+".</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.fightWin_part5+"<strong>"+e+"</strong> "+plural(e,CONTENT.vocabulary.point_singular,CONTENT.vocabulary.point_plural)+CONTENT.events.fightWin_part4+".</p>"}}function displayGame(){_game.character.health<1?gameOver():(_game.character.xp>=_game.character.xpTo&&(_game.character.level++,_game.character.power=_game.character.power+SETTINGS.data.lvlUpPower,_game.character.stamina=_game.character.stamina+SETTINGS.data.lvlUpStamina,_game.character.healthMax=_game.character.healthMax+SETTINGS.data.lvlUpHealth,_game.character.health=_game.character.healthMax,_game.character.xp=0,_game.character.xpTo=parseInt(1.25*_game.character.xpTo),get("#game").innerHTML+='<hr><p class="goodInformation"><strong>'+CONTENT.events.levelUp_part1+"</strong> !</p>",get("#game").innerHTML+='<p class="goodInformation">'+CONTENT.events.levelUp_part2+".</p>"),get("#tower").innerHTML=CONTENT.vocabulary.floor+" "+_game.character.floor+" - "+CONTENT.vocabulary.room+" "+_game.character.room,get("#healthData").innerHTML=_game.character.health+" / "+_game.character.healthMax,get("#health").style.width=100*_game.character.health/_game.character.healthMax+"%",get("#level").innerHTML=CONTENT.vocabulary.level+" "+_game.character.level,get("#xp").style.width=100*_game.character.xp/_game.character.xpTo+"%",get("#power").innerHTML='<img src="assets/image/'+SETTINGS.images.iconPower+'" alt="">  '+_game.character.power,get("#stamina").innerHTML='<img src="assets/image/'+SETTINGS.images.iconStamina+'" alt="">  '+_game.character.stamina,get("#potion").innerHTML='<img src="assets/image/'+SETTINGS.images.iconPotion+'" alt=""> '+_game.character.itemPotion,get("#scroll").innerHTML='<img src="assets/image/'+SETTINGS.images.iconScroll+'" alt=""> '+_game.character.itemScroll,get("#mineral").innerHTML='<img src="assets/image/'+SETTINGS.images.iconMineral+'" alt="">  '+_game.character.itemMineral,_game.character.itemPotion>0&&_game.character.health!=_game.character.healthMax?get("#usePotion").classList.remove("disabled"):get("#usePotion").classList.add("disabled"),_game.character.itemScroll>0?get("#useScroll").classList.remove("disabled"):get("#useScroll").classList.add("disabled"),_game.character.score=(_game.character.power+_game.character.stamina+_game.character.healthMax)*_game.character.level*_game.character.floor-30,_game.character.score>_game.stats.bestScore&&(_game.stats.bestScore=_game.character.score),_game.character.floor>_game.stats.bestFloor&&(_game.stats.bestFloor=_game.character.floor),_game.character.level>_game.stats.maxLevel&&(_game.stats.maxLevel=_game.character.level),""!=get("#game").innerHTML&&(_game.events.currentEvent=get("#game").innerHTML),setStorage("TOWER-save",JSON.stringify(_game)))}function gameOver(){clearInterval(_refreshDisplay),changeDisplay("game-to-info"),get("#information").style.backgroundColor=getVariableCSS("background-gameover"),get("#information").innerHTML="<p>"+CONTENT.events.gameover_part1+_game.character.floor+".</p>",get("#information").innerHTML+='<p class="important">'+CONTENT.events.gameover_part2+_game.character.score+"</p>",get("#information").innerHTML+='<button class="button buttonAction" id="restart">'+CONTENT.events.gameoverButton+"</button>",get("#restart").addEventListener("click",()=>{location.reload()}),resetGame()}function changeDisplay(e){"normal-game"===e&&(get("#chestMode").style.display="none",get("#merchantMode").style.display="none",get("#fightMode").style.display="none"),"normal-to-chest"===e&&(get("#classicMode").style.display="none",get("#chestMode").style.display="flex"),"chest-to-normal"===e&&(get("#classicMode").style.display="flex",get("#chestMode").style.display="none"),"normal-to-merchant"===e&&(get("#classicMode").style.display="none",get("#merchantMode").style.display="flex"),"merchant-to-normal"===e&&(get("#classicMode").style.display="flex",get("#merchantMode").style.display="none"),"normal-to-fight"===e&&(get("#classicMode").style.display="none",get("#fightMode").style.display="flex"),"fight-to-normal"===e&&(get("#classicMode").style.display="flex",get("#fightMode").style.display="none"),"game-to-info"===e&&(get("~header").style.display="none",get("#board").style.display="none",get("#information").style.display="flex"),"info-to-game"===e&&(get("~header").style.display="flex",get("#board").style.display="flex",get("#information").style.display="none")}function checkVersion(){_game.core.version!=VERSION&&(get("#blankPopup").style.display="block",get("#popup").style.display="flex",get("#popupText").innerHTML=CONTENT.main.updated,get("#popupCancel").style.display="none",get("#popupAccept").style.width="100%",get("#popupAccept").style.borderRadius="0 0 10px 10px",get("#popupAccept").addEventListener("click",()=>{clearInterval(_refreshDisplay),remStorage("TOWER-save"),location.reload()})),setStorage("TOWER-save",JSON.stringify(_game))}function createActionMenu(){get("#openMenu").addEventListener("click",()=>{""==get("#menu").style.display||"none"==get("#menu").style.display?(get("#blankMenu").style.display="block",get("#menu").style.display="flex",get("#openMenu").style.zIndex="50",get("#openMenuImg").src=SETTINGS.images.menuOpened,Object.values(CONTENT.stats).forEach((e,a)=>{0==a?get("#listStats").innerHTML="<li>"+e+Object.values(_game.stats)[a]+"</li>":get("#listStats").innerHTML+="<li>"+e+Object.values(_game.stats)[a]+"</li>"})):(get("#blankMenu").style.display="none",get("#menu").style.display="none",get("#openMenu").style.zIndex="5",get("#openMenuImg").src=SETTINGS.images.menuClosed)}),_game.core.sound?get("#volumeButton").innerHTML=SETTINGS.icons.soundOn:(get("#volumeButton").innerHTML=SETTINGS.icons.soundOff,get("#volumeButton").style.opacity=.5),get("#volumeButton").addEventListener("click",()=>{_game.core.sound?(_game.core.sound=!1,get("#volumeButton").innerHTML=SETTINGS.icons.soundOff,get("#volumeButton").style.opacity=.5):(_game.core.sound=!0,get("#volumeButton").innerHTML=SETTINGS.icons.soundOn,get("#volumeButton").style.opacity=1)}),get("#confirmRestart").addEventListener("click",()=>{get("#blankPopup").style.display="block",get("#popup").style.display="flex",get("#popupText").innerHTML=CONTENT.main.popupRestart,get("#popupCancel").addEventListener("click",()=>{get("#blankPopup").style.display="none",get("#popup").style.display="none"}),get("#popupAccept").addEventListener("click",()=>{clearInterval(_refreshDisplay),_game.core.ongoing=!1,resetGame(),location.reload()})}),get("#confirmDelete").addEventListener("click",()=>{get("#blankPopup").style.display="block",get("#popup").style.display="flex",get("#popupText").innerHTML=CONTENT.main.popupDelete,get("#popupCancel").addEventListener("click",()=>{get("#blankPopup").style.display="none",get("#popup").style.display="none"}),get("#popupAccept").addEventListener("click",()=>{clearInterval(_refreshDisplay),remStorage("TOWER-save"),location.reload()})})}function createActionButton(){get("#openMenu").style.display="block",get("#openMenu").style.visibility="visible",get("#openMenuImg").src=SETTINGS.images.menuClosed,get("#attack").addEventListener("click",attack),get("#useScroll").addEventListener("click",useScroll),get("#usePotion").addEventListener("click",usePotion),get("#openChest").addEventListener("click",openChest),get("#closeChest").addEventListener("click",closeChest),get("#acceptOffer").addEventListener("click",acceptMerchant),get("#refuseOffer").addEventListener("click",refuseMerchant),get("#move").addEventListener("click",playTurn)}function addSound(){Object.keys(SETTINGS.sounds).forEach(e=>{const a=document.createElement("audio");a.id=e,a.preload="auto",get("~body").appendChild(a);const t=document.createElement("source");t.src="assets/sound/"+SETTINGS.sounds[e]+".mp3",t.type="audio/mpeg",get("#"+e).appendChild(t)})}function playSound(e){1==_game.core.sound&&get("#sound"+e).play()}function resetGame(){_game.core.ongoing=!1,_game.stats.totalGame++,_game.character.health=SETTINGS.data.health,_game.character.healthMax=SETTINGS.data.healthMax,_game.character.power=SETTINGS.data.power,_game.character.stamina=SETTINGS.data.stamina,_game.character.xp=SETTINGS.data.xp,_game.character.xpTo=SETTINGS.data.xpTo,_game.character.itemPotion=SETTINGS.data.itemPotion,_game.character.itemScroll=SETTINGS.data.itemScroll,_game.character.itemMineral=SETTINGS.data.itemMineral,_game.character.level=SETTINGS.data.level,_game.character.floor=SETTINGS.data.floor,_game.character.room=SETTINGS.data.room,setStorage("TOWER-save",JSON.stringify(_game))}checkVersion(),0==_game.core.ongoing?launcher():startGame("load");